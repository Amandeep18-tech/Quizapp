{% extends "base.html"  %}
{% load static %}
{% load mathfilters %}
{% load crispy_forms_tags%}

{% block content %}
    <center>

        <h1>Welcome to the quiz app {{user.username}}</h1>

        <hr>
        </hr>
    </center>

    </h6>

    <div style="padding-left: 60px; padding-right: 60px;">

        <p id="countdown_1" style="position: relative; left:1150px; padding: 0%;"></p>
        <br>
        <div class="progress" style="padding: 0%;">
            <div class="progress-bar progress-bar-striped active" role="progressbar" id="pg" aria-valuenow="60"
                aria-valuemin="0" aria-valuemax="100" style="width:{% with progress_bar=page_obj.number|mul:100 total_pages=page_obj.paginator.num_pages %}
                        {{ progress_bar|div:total_pages}}%"%>
                {% endwith %}
            </div>
        </div>

        {% for question in questions %}
        <hr>
        <form method="POST" id="myform">
            {% csrf_token %}
            {{page_obj.number}} ) {{question.question}}
            {% if question.option1 %}
            </br>
            <input type="radio" id=Option value="{{question.option1}}" class="rb" name="name"> {{question.option1}}<br>
            <input type="radio" id=Option value="{{question.option2}}" class="rb" name="name"> {{question.option2}}<br>
            <input type="radio" id=Option value="{{question.option3}}" class="rb" name="name"> {{question.option3}} <br>
            <input type="radio" id=Option value="{{question.option4}}" class="rb" name="name"> {{question.option4}}<br>

            </hr>
            {% else %}
            </br>
            <br>
            <input type="text" id=Answer name="name" value="{{.user_answer}}" class="rb"> <br>
            </hr>
        {% endif %}
        </form>
        {% endfor %}
        <br>
        <b id="UserAnswers"></b>
        {% if is_paginated %}
        {% if page_obj.has_previous %}
        <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>
        {% endif %}
        {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
        <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %} <a class="btn btn-outline-info mb-4"
            href="?page={{ num }}">{{ num }}</a>
            {% endif %}
            {% endfor %}

            {% if page_obj.has_next %}
            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>


            {% else %}
            <a class="btn btn-outline-info mb-4" href="{% url 'result-page' %}" id="button1">Submit</a>
            {% endif %}

            {% endif %}
    </div>
    <script scr="{%  static 'script.js' %}"></script>
    {%  endblock content %} 
    
 