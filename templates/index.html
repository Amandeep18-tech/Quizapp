{% extends "base.html"  %}
{% load static %}
{% load mathfilters %}
{% load crispy_forms_tags%}

{% block content %}
    <center>

        <h1>Welcome to the quiz app {{user.username}}</h1>

        <hr>
        </hr>
    </center>

    </h6>

    <div style="padding-left: 10px; padding-right: 10px;"></div>

        <p id="countdown_1" style="position: relative; left:1150px; padding: 0%;"></p>
        <br>
        <div class="progress" style="padding: 0%;">
            <div class="progress-bar progress-bar-striped active" role="progressbar" id="pg" aria-valuenow="60"
                aria-valuemin="0" aria-valuemax="100" style="width:{% with progress_bar=page_obj.number|mul:100 total_pages=page_obj.paginator.num_pages %}
                        {{ progress_bar|div:total_pages}}%"%>
                {% endwith %}
            </div>
        </div>

        {% for question in questions %}
        <hr>
        <form method="POST" id="myform" action="{% url 'question-page' %}">
            {% csrf_token %}
            {{page_obj.number}} ) {{question.questions}}
            {% if question.is_mcq is True %}
            </br>
            {% for mcq in mcqs %}
            {% if mcq.questions.id == question.id %}
            <input type="radio" id=Option value="{{mcq.option1}}" class="rb" name="user_answer"> {{mcq.option1}}<br>
            <input type="radio" id=Option value="{{mcq.option2}}" class="rb" name="user_answer"> {{mcq.option2}}<br>
            <input type="radio" id=Option value="{{mcq.option3}}" class="rb" name="user_answer"> {{mcq.option3}} <br>
            <input type="radio" id=Option value="{{mcq.option4}}" class="rb" name="user_answer"> {{mcq.option4}}<br>
            <br> 
            {% endif %}
            {% endfor %}
            <br>
            {% elif question.is_fill_in_the_blanks is True %}
            
            <br>
            <input type="text" id=user_answer   name="user_answer"  class="rb"> <br>
            </hr>
            <div>
        {% endif %}
        {% if is_paginated %}
    
            {% if page_obj.has_next %}
               
                <input class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}"  form="myform" type="submit" value="next" >
                
            {% else %}
            
                
                <input class="btn btn-outline-info mb-4" href="{% url 'result-page' %}" form="myform" type="Submit" value="Submit" >
               
                
            {% endif %}

            {% endif %}
            </div>
        </form>
        {% endfor %}

        
    </div>
    <script src="{% static 'main.js' %}"></script>
    {%  endblock content %} 
    